<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="post-body">
    <div class="post-container">
        <div class="board" id="dashboard"></div>
        
          <div class="board" id="profile">
            <h1 class="post-header">PROFILE</h1>
            <br>
            <img src="/<%= profile.image %>" alt="profile image" style="width: 200px; height: 200px; border-radius: 50%;" >
            <p><strong>Username:</strong> <%= profile.user ? profile.user.username : 'Unknown user' %></p>
            <% if (profile) { %>
              <p><strong>Bio:</strong> <%= profile.bio %></p>
              <p><strong>Location:</strong> <%= profile.location || 'Location not specified' %></p>
              <p><strong>Pronoun:</strong> <%= profile.pronoun || 'Not specified' %></p>
            <% } else { %>
              <p>User or profile not found.</p>
            <% } %>
          </div>
        </div>    
</body>
</html>

<% if (profiles && profiles.length > 0) { %>
  <% profiles.forEach((profile) => { %>
    <!-- Profile info -->
    <a href="/profiles/<%= profile.id %>">
      <div style="display: flex; align-items: center;">
        <% if (profile.image) { %>
          <img src="/uploads/<%= profile.image %>" alt="Profile Picture" style="width: 50px; height: 50px; border-radius: 50px;">
        <% } %>
        <p style="margin-left: 10px;"><%= profile.user.username %></p>
        <button type="submit" style="margin-left: 330px;">Follow</button>
      </div>
    </a>
              <!-- Display posts -->
    <% if (profile.user.posts && profile.user.posts.length > 0) { %>
      <% profile.user.posts.forEach((post) => { %>
        <div>
          <% if (post.image) { %>
            <img src="/uploads/<%= post.image %>" alt="Post Image" style="width: 500px; height: 500px;">
          <% } %>
          <p><%= post.content %></p>
          <a href=""><i class="fa fa-heart"></i></a>
          <a href=""><i class="fa fa-comment"></i></a>
          <a href=""><i class="fa fa-bookmark"></i></a>
          <a href=""><i class="fa fa-send"></i></a>
          </div>
          <% if (user && post.userId === user.id) { %>
            <form action="/posts/delete/<%= post.id %>" method="post">
              <button type="submit">Delete Post</button>
            </form>
          <% } %>

          <!-- Display comments -->
          <% if (post.comments && post.comments.length > 0) { %>
            <% console.log(post.comments); %>
            <% post.comments.forEach((comment) => { %>
              <div>
                <% if (comment.user) { %>
                  <p><%= comment.user.username %> : <%= comment.content %></p>
                <% } else { %>
                  <p>Unknown user : <%= comment.content %></p>
                <% } %>
              </div>
            <% }); %>
          <% } else { %>
            <p>No comments yet.</p>
          <% } %>

          <!-- Comment form -->
          <form action="/posts/<%= post.id %>/comments" method="post">
            <textarea name="content" placeholder="Write a comment..."></textarea>
            <br>
            <button type="submit">Submit</button>
          </form>
        </div>
      <% }); %>
    <% } else { %>
      <p>No posts available</p>
    <% } %>
  <% }); %>
<% } %>
              


